<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover">
<title>Ripple Reveal – Organic Variation</title>
<style>
html,body { margin:0; height:100%; background:#000; }
.stage { position:fixed; inset:0; overflow:hidden; }
.bg, .bg > * { position:absolute; inset:0; width:100%; height:100%; object-fit:cover; display:block; }
.bg { pointer-events:none; }
canvas { position:absolute; inset:0; width:100%; height:100%; display:block; }
</style>
</head>
<body>
<div class="stage">
<div class="bg">
<video id="bgVideo" muted playsinline loop preload="auto">
<source src="/assets/videos/Landingloop.mp4" type="video/mp4">
</video>
</div>
<canvas id="c"></canvas>
</div>

<script>
(() => {
const video = document.getElementById('bgVideo');
const canvas = document.getElementById('c');
const ctx = canvas.getContext('2d');

const COVER_ALPHA=1.25, RING_COUNT=4, RING_SPACING=30, BASE_WIDTH=2, LIFE_MS=1600, SPEED=220;
const EDGE='hsla(210,8%,80%,ALPHA)';

let dpr = window.devicePixelRatio || 1;
function resize(){
const w=innerWidth,h=innerHeight;
dpr=Math.min(3,Math.max(1,dpr));
canvas.width=w*dpr; canvas.height=h*dpr;
canvas.style.width=w+'px'; canvas.style.height=h+'px';
ctx.setTransform(dpr,0,0,dpr,0,0);
}
window.addEventListener('resize',resize,{passive:true}); resize();

// ensure autoplay works
function tryPlay(){ const p=video.play?.(); if(p?.catch) p.catch(()=>{}); }
video.addEventListener('canplay',tryPlay);
addEventListener('pointerdown',tryPlay,{once:true,passive:true});
tryPlay();

const ripples=[];
function addRipple(x,y){
ripples.push({
x,y,
t0:performance.now(),
// random variation per ripple
opacity:0.2+Math.random()*0.6, // 0.2–0.8
widthJitter:0.5+Math.random()*1.5, // scale for line width
});
}
canvas.addEventListener('pointerdown',e=>addRipple(e.clientX,e.clientY),{passive:true});

function frame(now){
ctx.clearRect(0,0,canvas.width/dpr,canvas.height/dpr);
ctx.fillStyle=`rgba(0,0,0,${COVER_ALPHA})`;
ctx.fillRect(0,0,canvas.width/dpr,canvas.height/dpr);

for(let i=ripples.length-1;i>=0;i--){
const r=ripples[i];
const age=now-r.t0;
if(age>LIFE_MS){ ripples.splice(i,1); continue; }
const base=(age/1000)*SPEED;
const life=1-age/LIFE_MS;
const baseAlpha=(r.opacity*life).toFixed(3);
const width=BASE_WIDTH*r.widthJitter*(1+0.3*Math.sin(age*0.005));

// cut through veil
ctx.globalCompositeOperation='destination-out';
ctx.strokeStyle='rgba(0,0,0,1)';
ctx.lineWidth=width;
for(let k=0;k<RING_COUNT;k++){
const rad=base+k*RING_SPACING; if(rad<=0) continue;
ctx.beginPath(); ctx.arc(r.x,r.y,rad,0,Math.PI*2); ctx.stroke();
}

// soft edge highlight
ctx.globalCompositeOperation='source-over';
const edge=EDGE.replace('ALPHA',(baseAlpha*0.4).toString());
ctx.strokeStyle=edge;
ctx.lineWidth=width;
for(let k=0;k<RING_COUNT;k++){
const rad=base+k*RING_SPACING; if(rad<=0) continue;
ctx.beginPath(); ctx.arc(r.x,r.y,rad,0,Math.PI*2); ctx.stroke();
}
}

ctx.globalCompositeOperation='source-over';
requestAnimationFrame(frame);
}
requestAnimationFrame(frame);
})();
</script>
</body>
</html>




