<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Hold Ripple</title>
<style>
  html,body{
    margin:0;height:100%;background:#0e0e10;overflow:hidden;
    touch-action:none; /* disable browser zoom, text-select, hold menu */
    user-select:none;
  }
  canvas{width:100%;height:100%;display:block;}
</style>
</head>
<body>
<canvas id="c"></canvas>
<script>
const canvas = document.getElementById('c');
const ctx = canvas.getContext('2d');
let dpr = window.devicePixelRatio || 1;
function resize(){
  canvas.width = innerWidth * dpr;
  canvas.height = innerHeight * dpr;
  ctx.setTransform(dpr,0,0,dpr,0,0);
}
resize();
window.addEventListener('resize', resize);

const ripples = [];
let holdStart = null;

function randomColor(){
  const h = Math.floor(Math.random()*360);
  return `hsl(${h},80%,60%)`;
}

function addRipple(x, y, holdTime){
  // duration and size scale with hold time (0.3s → min; 2s → max)
  const duration = 800 + Math.min(holdTime, 2000);
  const scale = 0.18 + 0.18 * Math.min(holdTime, 2000)/2000;
  ripples.push({x, y, t0: performance.now(), color: randomColor(), dur: duration, scale});
}

function getPos(e){
  if(e.touches && e.touches[0]) return {x:e.touches[0].clientX, y:e.touches[0].clientY};
  return {x:e.clientX, y:e.clientY};
}

// prevent long-press menu on mobile
canvas.addEventListener('contextmenu', e => e.preventDefault());

// Track hold start/end
canvas.addEventListener('pointerdown', e=>{
  holdStart = {t: performance.now(), ...getPos(e)};
});
canvas.addEventListener('pointerup', e=>{
  if(!holdStart) return;
  const holdTime = performance.now() - holdStart.t;
  addRipple(holdStart.x, holdStart.y, holdTime);
  holdStart = null;
});
canvas.addEventListener('pointercancel', ()=>holdStart=null);
canvas.addEventListener('pointerleave', ()=>holdStart=null);

function draw(now){
  ctx.fillStyle='rgba(14,14,16,0.08)';
  ctx.fillRect(0,0,canvas.width/dpr,canvas.height/dpr);

  for(let i=ripples.length-1;i>=0;i--){
    const r = ripples[i];
    const age = now - r.t0;
    const t = age / r.dur;
    if(t >= 1){ ripples.splice(i,1); continue; }

    const base = (age * 0.25) * r.scale; // expansion speed scales
    const alpha = (1 - t) ** 1.3;
    ctx.strokeStyle = r.color.replace('hsl','hsla').replace(')',`,`+(alpha*0.9)+`)`);
    ctx.lineWidth = 2;
    for(let j=0;j<5;j++){
      ctx.beginPath();
      ctx.arc(r.x, r.y, base + j*25, 0, Math.PI*2);
      ctx.stroke();
    }
  }
  requestAnimationFrame(draw);
}
requestAnimationFrame(draw);
</script>
</body>
</html>





